<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Basketball Scorebook 2.0</title>
    <link rel="stylesheet" href="styles-2.css">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <h1 id="game-name">Basketball Scorebook</h1>
        <div class="header-buttons">
            <button id="settings-btn" class="icon-btn" title="Settings">
                <i data-lucide="settings"></i>
            </button>
            <button id="help-btn" class="icon-btn" title="Help">
                <i data-lucide="info"></i>
            </button>
        </div>
    </header>

    <div class="app-container">
        <!-- Shot Map Section -->
        <section class="shot-map-section">
            <div class="section-header">
                <h2>Shot Map</h2>
                <div class="control-buttons">
                    <button id="undo-btn" class="text-btn" title="Undo">
                        Undo
                    </button>
                    <button id="redo-btn" class="text-btn" title="Redo">
                        Redo
                    </button>
                    <button id="select-btn" class="icon-btn" title="Select All / Clear All" style="display: none;">
                        <i data-lucide="users"></i>
                    </button>
                    <div class="mode-dropdown">
                        <button id="mode-btn" class="mode-dropdown-btn">
                            <span id="mode-label">Editing</span>
                            <i data-lucide="chevron-down" style="width: 16px; height: 16px; margin-left: 4px;"></i>
                        </button>
                        <div id="mode-menu" class="mode-dropdown-menu">
                            <button class="mode-option" data-mode="edit">Editing</button>
                            <button class="mode-option" data-mode="view">View Only</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Jersey Row -->
            <div id="jersey-row" class="jersey-row"></div>

            <!-- Stat Row (Fouls + Stats + Actions) -->
            <div id="stat-row" class="stat-row">
                <p>Select a player to begin</p>
            </div>

            <!-- Guide Text (above court, hidden by default) -->
            <div id="guide-text" class="guide-text" style="display: none;"></div>

            <!-- Court Canvas -->
            <div class="court-container">
                <canvas id="shots-map-canvas"></canvas>
                <!-- Tap Text Overlay (on court, hidden by default) -->
                <div id="tap-text" class="tap-text" style="display: none;">tap to draw shot</div>
                <!-- Retap Text Overlay (on court, hidden by default) -->
                <div id="retap-text" class="retap-text" style="display: none;">retap to move, press done to confirm</div>
            </div>

            <!-- Draw Row (below court, hidden by default) -->
            <div id="draw-row" class="draw-row" style="display: none;">
                <div class="draw-buttons">
                    <button id="cancel-btn" class="btn-secondary">Cancel</button>
                    <button id="done-btn" class="btn-primary disabled">Done</button>
                </div>
            </div>

            <!-- Stat Buttons (below court) -->
            <div id="shot-buttons-section" class="stat-buttons-section"></div>
        </section>

        <!-- Action Log Section -->
        <section class="action-log-section">
            <h2>Action Log</h2>
            <p class="help-text">Click on action to make change if needed</p>
            <div id="action-log" class="action-log"></div>
        </section>

        <!-- Summary Section -->
        <section class="summary-section">
            <h2>Team Summary</h2>
            <div id="summary-table" class="summary-table"></div>
        </section>

        <!-- Game Management -->
        <div class="game-management">
            <button id="history-btn" class="btn-secondary">
                <i data-lucide="history"></i> History
            </button>
            <button id="share-btn" class="btn-secondary">
                <i data-lucide="share-2"></i> Share PDF
            </button>
            <button id="export-btn" class="btn-secondary">
                <i data-lucide="download"></i> Export
            </button>
            <button id="import-btn" class="btn-secondary">
                <i data-lucide="upload"></i> Import
            </button>
            <button id="clear-game-btn" class="btn-danger">
                <i data-lucide="eraser"></i> Clear Game
            </button>
            <button id="new-game-btn" class="btn-primary">
                <i data-lucide="plus-circle"></i> New Game
            </button>
        </div>
    </div>

    <!-- Load Scripts in Order -->
    <!-- Utilities -->
    <script src="js/utils/idGenerator.js"></script>
    <script src="js/utils/formatters.js"></script>
    <script src="js/utils/animations.js"></script>

    <!-- Core -->
    <script src="js/core/eventBus.js"></script>
    <script src="js/core/dataModel.js"></script>
    <script src="js/core/storage.js"></script>

    <!-- Managers -->
    <script src="js/managers/statCalculator.js"></script>
    <script src="js/managers/eventManager.js"></script>
    <script src="js/managers/gameManager.js"></script>

    <!-- Canvas -->
    <script src="js/canvas/courtRenderer.js"></script>
    <script src="js/canvas/shotRenderer.js"></script>
    <script src="js/canvas/canvasInteraction.js"></script>

    <!-- UI -->
    <script src="js/ui/settingsUI.js"></script>
    <script src="js/ui/gameHistoryUI.js"></script>
    <script src="js/ui/actionCorrectionUI.js"></script>
    <script src="js/ui/helpUI.js"></script>
    <script src="js/ui/ui.js"></script>

    <!-- App -->
    <script src="js/app.js"></script>

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>

    <!-- PDF Export Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- PDF Export Module -->
    <script src="js/utils/pdfExport.js"></script>
</body>
</html>
